<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>View Profile</title>
    <link rel="stylesheet" href="viewprofile.css" />
  </head>
  <body>
    <div class="header">
      <div class="content-navbar">
        <div class="whenintaft-container">
          <h1 class="whenintaft">WhenInTaft</h1>
        </div>

        <div class="navbar-items-container">
          <div class="navbar-items">
            <span><h2 class="navbar">HOME</h2></span>
            <span><h2 class="navbar">RESTAURANTS</h2></span>
            <span><h2 class="navbar" id="viewprofile">VIEWPROFILE</h2></span>
          </div>
          <div class="line">
            <hr id="navbar-line" />
          </div>
        </div>
      </div>
      <div class="profile-navbar">
        <img src="assets/anonymous_picture.png" class="anonpic" />
      </div>
    </div>
    <hr id="header-divider" />

    <div class="search-section">
      <input type="text" class="search-bar" />
      <img src="assets/searchbutton.png" class="searchbutton" />
    </div>

    <div id="profilee">
      <div class="box">
        <div class="box-a">
          <a href="#profile" class="aboutme">About Me</a>
          <a href="#review" class="aboutme">Reviews</a>
          <a href="#" class="aboutme">Gallery</a>
        </div>
      </div>
      <div class="profile-section" id="profile">
        <div class="profile-pictures-section">
          <div class="profile-picture">
            <img src="assets/avatar.webp" />
          </div>

          <div class="smaller-profiles">
            <img src="assets/avatar.webp" />
            <img src="assets/avatar.webp" />
            <img src="assets/avatar.webp" />
          </div>
        </div>
        <div class="profile-description">
          <h1>Harry Potter</h1>
          <p>
            At the age of one, Harry's parents are killed by Lord Voldemort, who
            then attempts to kill him with the Killing Curse. Due to The Power
            of Love from his mother's self-sacrifice, however, he survives and
            rebounds the curse upon Voldemort, getting a lightning bolt-shaped
            scar as a souvenir. The series' resident Eccentric Mentor,
            Dumbledore, then arranges to have his Muggle aunt and uncle take him
            in or else.
          </p>
        </div>

        <div class="edit-profile-section">
          <h4>Edit Profile</h4>
          <img src="assets/book_icon.png" />
        </div>
      </div>
      <div class="box"></div>
    </div>

    <div class="reviews-section">
      <div class="label-and-navigator" id="review">
        <h3>User's Reviews</h3>
        <ul>
          <li>1</li>
          <li>2</li>
          <li>3</li>
          <li>4</li>
          <li>5</li>
          <li>>></li>
        </ul>
      </div>
      <div class="reviews-content-container">
        <div class="reviews-left-container">
          <div class="left">
            <div class="reviews-user-details">
              <img
                src="assets/anonymous_picture.png"
                class="reviews-profile-pic"
              />
            </div>
            <div class="further-details">
              <div class="name">
                <h6 class="firstname">Harry</h6>
                <h6 class="lastname">Potter</h6>
              </div>
              <div class="others">
                <p class="review-count">9 Reviews</p>
                <p>stars</p>
              </div>
            </div>
          </div>

          <div class="review">
            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
              eiusmod tempor incididunt ut labore et dolore magna aliqua.
            </p>
          </div>
        </div>

        <div class="reviews-pictures">
          <img src="assets/starbucks.jpg" class="review-image" />
          <img src="assets/starbucks.jpg" class="review-image" />
        </div>
      </div>

      <div class="reviews-content-container">
        <div class="reviews-left-container">
          <div class="left">
            <div class="reviews-user-details">
              <img
                src="assets/anonymous_picture.png"
                class="reviews-profile-pic"
              />
            </div>
            <div class="further-details">
              <div class="name">
                <h6 class="firstname">Harry</h6>
                <h6 class="lastname">Potter</h6>
              </div>
              <div class="others">
                <p class="review-count">9 Reviews</p>
                <p>stars</p>
              </div>
            </div>
          </div>

          <div class="review">
            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
              eiusmod tempor incididunt ut labore et dolore magna aliqua.
            </p>
          </div>
        </div>

        <div class="reviews-pictures">
          <img src="assets/starbucks.jpg" class="review-image" />
          <img src="assets/starbucks.jpg" class="review-image" />
        </div>
      </div>
    </div>
  </body>
  <script>
    const reviews = document.querySelectorAll(".review");
    const times = document.querySelectorAll(".review").length;
    let flag = true;

    for (let i = 0; i < times; i = i + 1) {
      revs = reviews[i];
      // assign value of text shown here (change 80)
      revs.innerText = truncateText(revs, 80);
      revs.innerHTML += '<span id="more">&nbsp;see more</span>';
    }

    // https://stackoverflow.com/a/63162630
    function truncateText(selector, maxLength) {
      var element = selector;
      truncated = element.innerText;
      truncate = truncated;

      if (truncated.length > maxLength) {
        truncated = truncated.substr(0, maxLength) + "...";
      }
      console.log("trucated: ", truncated);
      console.log(element, "Successfully Truncated");
      return truncated;
    }

    //https://stackoverflow.com/a/62555388
    reviews.forEach((cell) =>
      cell.addEventListener("click", function () {
        if (flag == true) {
          cell.innerHTML = truncate;
          cell.innerHTML += '<span id="more">&nbsp;see less</span>';
          flag = false;
        } else if (flag == false) {
          cell.innerHTML = truncated;
          cell.innerHTML += '<span id="more">&nbsp;see more</span>';
          flag = true;
        }
      })
    );
  </script>
</html>
