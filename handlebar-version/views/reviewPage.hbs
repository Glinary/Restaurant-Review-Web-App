<!DOCTYPE html>

  <body>
<!--START OF HEADER--> 
      <header>
        <div class="RP-app-name">
          <h1>WhenInTaft</h1>
        </div>
        <div class="toggle-bars" id="mobile-menu">
          <div class="toggle"></div>
          <div class="toggle"></div>
          <div class="toggle"></div>
        </div>
        <div class="divide-this"></div>
          
        <div class="menu-bar">
          <div class="menu-list">
            <div class="part1">
              <a href="/indexLog" id="current">HOME</a>
              <a href="/restaurant">RESTAURANTS</a>
            </div>
            <div class="menu-line"></div>
            <div class="search-container2">
            <i class="fa-solid fa-magnifying-glass fa-2x" style="color: #ceb9a7; margin-left:0.5rem;"></i>
            <form action="SearchPage.html" id="searchform" method="get">
                <input
                  type="text"
                  placeholder="Type to search"
                  name="searchBar"
                  id="searchBar"
                />
                <input 
                  type="submit"
                  value="submit"
                  />
            </form>
            </div>
            <div class="menu-bar2">
              <nav>
                <ul>
                  <li>
                    <div class="view-profile">
                      <a href="/viewprofileU1" id="prof-page">VIEW PROFILE</a>
                      <img src="assets/anonymous_picture.png" id="prof-pic" />
                    </div>
                    <div class="dropdown-m">
                      <ul>
                        <li><a href="/viewprofileU1">VIEW PROFILE</a></li>
                        <li><a href="/editProfile">EDIT PROFILE</a></li>
                        <li><a href="/">LOGOUT</a></li>
                      </ul>
                    </div>
                  </li>
                </ul>            
              </nav>
            </div>
          </div>
        </div>    
      </header>
      <div class="search-container">
        <input
          type="text"
          placeholder="Type to search"
          name="searchBar"
          id="searchBar"
        /><a href="/SearchPage"></a>
      </div>
      <div class="search-line"></div>

<!-- END OF HEADER ->

<!-- content body -->
    <div class="section">
      <div class="left-block roundblock"></div>

      <!-- center-block -->
      <div class="center-block roundblock">

        <!-- center-block: review box -->
        <div class="block1 roundblock">
          <div id="heading">
          <p>Write your honest thoughts.</p>
          <div id="star-ratings">
            <p title="Click to rate!">Rate here: </p>
            <div title="click to rate!" id="star"><i class="fa-regular fa-star"></i></div>
            <div title="click to rate!" id="star"><i class="fa-regular fa-star"></i></div>
            <div title="click to rate!" id="star"><i class="fa-regular fa-star"></i></div>
            <div title="click to rate!" id="star"><i class="fa-regular fa-star"></i></div>
            <div title="click to rate!" id="star"><i class="fa-regular fa-star"></i></div>
          </div>
        </div>
          <div class="review-section">
            <form id="reviewPage-form" action="/reviewPage" method="POST">
              <!-- Add a hidden input field to store the restaurant name -->
              <input type="hidden" id="restaurantNameInput" name="restaurantName">
              <div class="user-review">
                <textarea
                  id="user-rev"
                  rows="8"
                  cols="120"
                  placeholder="write your review here"
                  name = "reviewDesc"
                  maxlength="350"
                ></textarea>
              </div>
              <!-- Your JavaScript code to retrieve the restaurant name from the URL parameter -->
              <script>
                const urlParams = new URLSearchParams(window.location.search);
                const restaurantName = urlParams.get('restaurantName');
                const restaurantNameInput = document.getElementById('restaurantNameInput');

                // Set the value of the hidden input field to the retrieved restaurant name
                if (restaurantNameInput) {
                  restaurantNameInput.value = restaurantName;
                }
              </script>
          </div>
        </div>

        <!-- center-block: image box -->
        <div class="block2 roundblock">
          <p>Upload 2 images</p>
          <div class="image-section">
            <div class="image-section1">
              <div class="user-upload">
                <!-- https://nikitahl.com/custom-styled-input-type-file -->
                  <input id="user-rev-pic1" name="user-rev-pic1" type="file" />
              </div>
            </div>
            <div class="image-section2">
              <div class="user-upload">
              <input id="user-rev-pic1" name="user-rev-pic1" type="file" />
                
              </div>
            </div>
          </div>
        </div>

        <!-- center-block: buttons box -->
        <div class="submission">
          <div class="buttons">
            <div class="cancel"><a href="#">cancel</a></div>
            <input id="submit" form="reviewPage-form" type="submit" value="submit review"> 
          </div>
        </form>
        </div>
      </div>
      <!-- end of center block -->

      <div class="right-block roundblock"></div>
    </div>
<!-- end of content body -->
  </body>
  <script>
    //menu
    const menu = document.querySelector("#mobile-menu");
    const menuLinks = document.querySelector(".menu-bar");
    const userPage = document.querySelector("#prof-page");
    const userPic = document.querySelector("#prof-pic");
    const searchBar = document.querySelector(".search-container");

    menu.addEventListener("click", function () {
      menu.classList.toggle("is-active");
      menuLinks.classList.toggle("active");
      searchBar.classList.toggle("active");
    });
    userPage.addEventListener("mouseover", function () {
      userPic.classList.toggle("hovered");
    });
    userPage.addEventListener("mouseout", function () {
      userPic.classList.toggle("hovered");
    });

    //stars
    const starList = document.querySelectorAll("#star");
    let arrStar = [];

    console.log(starList);

  for (let i = 0; i < starList.length; i++){
    arrStar.push(0)
  }

  for (let k = 0; k < starList.length; k++){
    starList[k].addEventListener("click", function(){
      if (arrStar[k] == 0){
          starList[k].innerHTML = "<i class=\"fa-solid fa-star\" style=\"color:  #dac22b;\"></i>";
          arrStar[k] = 1;
          for (let j = 0; j < k ; j++){
            starList[j].innerHTML = "<i class=\"fa-solid fa-star\" style=\"color: #dac22b;\"></i>";
            arrStar[j] = 1;
          }
      } else if (arrStar[k] == 1 && arrStar[k+1] == 0){
        starList[k].innerHTML = "<i class=\"fa-regular fa-star\"></i></div>";
        arrStar[k] = 0;
      }
        else if (arrStar[k] == 1 && arrStar[k+1] != 0)
          for (let l = k + 1; l < starList.length; l++){
            starList[l].innerHTML = "<i class=\"fa-regular fa-star\"></i></div>";
            arrStar[l] = 0;
          }
    })
  }
  </script>
</html>
